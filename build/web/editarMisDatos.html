<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Mis Ofertas</title>
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- Bootstrap core CSS -->
        <!--<link href="css/bootstrap.min.css" rel="stylesheet">-->
        <!-- Material Design Bootstrap -->
        <link href="css/mdb.min.css" rel="stylesheet">
        <!-- Your custom styles (optional) -->
        <link href="css/style.css" rel="stylesheet">
        <link href="css/compiled.min.css" rel="stylesheet">
        <style>
            .mi-select{
                font-size: 18px;
                font-family: inherit;
                padding: 10px 16px;
                border-radius:6px;
                width: auto;
                background-color: #fff;
                border: 1px solid #ccc;
            }
            .formEditDatos{
                left: 16%;
            }
            /*@media (max-width : 777px) {*/
            @media (max-width : 767px) {
                .formEditDatos{
                    left: 0!important;
                }
                .select-derecho{
                    margin: auto!important;
                    float: none !important;
                    margin-bottom: 1rem!important;
                }
                .select-izquerdo{
                    /*margin-top: 2rem;*/
                    margin: auto!important;
                    float: none !important;
                }
                h2{
                    padding: 1rem!important;
                }
            }
        </style>
    </head>


    <body>

        <!--Header-->
        <header style="padding-bottom: 55px">
            <!--Navbar-->
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-red scrolling-navbar">
                <div class="container">
                    <a class="navbar-brand" href="#"><img src="img/IconoMisOfertas.png" style="height: 2rem" /><strong>Mis Ofertas</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="accesoCliente.html?d=41">Ofertas</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="nosotros.html">Nosotros</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ml-auto nav-flex-icons">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle waves-effect waves-light" id="navbarNombreSesion" data-toggle="dropdown" aria-haspopup="true"
                                   aria-expanded="false"><i class="fa fa-user"></i> Sesion 
                                </a>
                                <div class="dropdown-menu dropdown-menu-right dropdown-unique" aria-labelledby="navbarNombreSesion">
                                    <a onclick="cerrarSesion()" class="dropdown-item waves-effect waves-light" href="index.html"> Cerrar Sesion  <i class="fa fa-window-close-o"></i></a>
                                    <!--<a class="dropdown-item waves-effect waves-light" href="#" > Mis datos  <i class="fa fa-address-card-o"></i></a>-->
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!--Fin Navbar-->
        </header>
        <!--Fin de Header-->

        <!--Main-->
        <main>
            <hr class="featurette-divider" style="margin-bottom: 50px">

            <section>
                <div class="container marketing">
                    <!--Form Editar Datos-->
                    <form  id="formEditarDatos" method="POST" action="ClienteServlet">
                        <div id="formEditDatos" class="col-md-8 formEditDatos">
                            <div class="" >
                                <div class="">
                                    <div class="card" style="">
                                        <div class="card-body">
                                            <div class="form-header default-color">
                                                <h3><i class="fa fa-address-card"></i> Modifique sus datos</h3>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-envelope prefix"></i>
                                                <input type="email" id="txtCorreo" name="txtCorreo" class="form-control" value="csalgadolizana@gmail.com" required="">
                                                <label for="txtCorreo" >Su correo</label>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-calendar prefix"></i>
                                                <input id="check" class="form-control" value="21" type="checkbox">
                                                <label for="check">¿Cambiar contraseña?</label>
                                            </div>
                                            <div id="contenedor-contras" class="collapse">
                                                <div class="md-form">
                                                    <i class="fa fa-lock prefix"></i>
                                                    <input type="password" id="txtPasswdActual" name="txtPasswdActual" class="form-control" value=""  required="">
                                                    <label for="txtPasswdActual">Tu contraseña</label>
                                                </div>
                                                <div class="md-form">
                                                    <i class="fa fa-lock prefix"></i>
                                                    <input type="password" id="txtPasswd" name="txtPasswd" class="form-control" value=""  required="">
                                                    <label for="txtPasswd">Tu contraseña</label>
                                                </div>
                                                <div class="md-form">
                                                    <i class="fa fa-lock prefix"></i>
                                                    <input type="password" id="txtPasswd2" name="txtPasswd2" class="form-control" value="" required="">
                                                    <label for="txtPasswd2">Repite tu contraseña</label>
                                                </div>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-user prefix"></i>
                                                <input type="text" id="txtNombre" name="txtNombre" class="form-control" required="" maxlength="30">
                                                <label for="txtNombre">Su nombre</label>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-user prefix"></i>
                                                <input type="text" id="txtApellido" name="txtApellido" class="form-control" required="" maxlength="45">
                                                <label for="txtApellido">Sus apellidos</label>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-user prefix"></i>
                                                <input type="text" id="txtRut" name="txtRut" class="form-control" value="" required="" maxlength="17">
                                                <label for="txtRut">Su rut</label>
                                            </div>

                                            <div class="md-form input-group">
                                                <span class="input-group-addon" id="basic-addon3"><i class="fa fa-birthday-cake"></i>fecha nacimiento</span>
                                                <input type="date" id="txtFechaNacimiento" name="txtFechaNacimiento" class="form-control" value="" required="">
                                            </div>

                                            <div class="md-form">
                                                <i class="fa fa-venus-mars prefix"></i>
                                                <select name="selectSexo" class="browser-default form-control select-izquerdo" style="width: 30%;margin-left: 20%">
                                                    <option value="1">Hombre</option>
                                                    <option value="2">Mujer</option>
                                                </select>
                                                <label for="selectSexo">Sexo</label>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-phone prefix"></i>
                                                <input type="number" id="txtTelefono" name="txtTelefono" class="form-control" min="1" max="999999999" required="">
                                                <label for="txtTelefono">Telefono</label>
                                            </div>
                                            <div class="md-form">
                                                <i class="fa fa-newspaper-o prefix"></i>
                                                <input type="checkbox" id="checAceptaInformativo" name="checAceptaInformativo" class="form-control" value="1">
                                                <label for="checAceptaInformativo">¿Recibir noticias?</label>
                                            </div>
                                            <div class="md-form form-sm">
                                                <i class="fa fa-map prefix"></i>
                                                <select name="selectRegion" id="selectRegion" class="browser-default form-control select-izquerdo" style="width: 30%;margin-left: 30%" required="">
                                                    <option disabled="" selected="">Seleccione</option>
                                                    <option value="1">Region 1</option>
                                                    <option value="2">Region 2</option></select>
                                                <label for="selectRegion">Region</label>
                                            </div>
                                            <div class="md-form form-sm">
                                                <i class="fa fa-map prefix"></i>
                                                <select name="selectComuna" id="selectComuna" class="browser-default form-control select-izquerdo" style="width: 30%;margin-left: 30%" required="">
                                                    <option disabled="" selected="">Seleccione</option>
                                                    <option value="1">Comuna 1</option>
                                                    <option value="2">Comuna 2</option></select>
                                                <label for="selectComuna">Comuna</label>
                                            </div>

                                            <div class="text-center">
                                                <a id="btnCancelar" class="pull-left btn btn-grey waves-effect waves-light" href="index.html">Volver</a>
                                                <button type="button"  value="btnRegistroFalso" id="btnRegistroFalso" class="pull-right btn btn-default waves-effect waves-float">Modificar</button>
                                                <button type="submit" name="btnAccion" value="segundoRegistro" id="btnRegistrarse" style="display: none" class="pull-right btn btn-default waves-effect waves-float">Modificar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!--fin Form Editar Datos-->
                </div>
            </section>

            <hr class="featurette-divider" style="margin-bottom: 120px">
        </main>
        <!--Fin Main-->

        <!--Footer-->
        <footer class="page-footer indigo center-on-small-only pt-0">
            <div class="container">

                <!--First row-->
                <div class="row">

                    <!--First column-->
                    <div class="col-md-12 wow fadeIn" data-wow-delay="0.3s">

                        <div class="text-center d-flex justify-content-center my-4">

                            <!--Facebook-->
                            <a target="_blank" href="https://www.facebook.com/Mis-Ofertas-144741596169745/" class="icons-sm fb-ic"><i class="fa fa-facebook white-text fa-lg pr-md-4"> </i></a>
                            <!--Twitter-->
                            <a target="_blank" href="https://twitter.com/MisOfertasCl" class="icons-sm tw-ic"><i class="fa fa-twitter white-text fa-lg pr-md-4"> </i></a>                           
                            <!--Instagram-->
                            <a target="_blank" href="https://www.instagram.com/misofertas.cl/?hl=es" class="icons-sm ins-ic"><i class="fa fa-instagram white-text fa-lg pr-md-4"> </i></a>                            
                        </div>

                    </div>
                    <!--/First column-->

                </div>
                <!--/First row-->

            </div>
            <!--/Footer Links-->
            <!--Copyright-->
            <div class="footer-copyright wow fadeIn" data-wow-delay="0.3s">
                <div class="container-fluid">
                    Copyright © 2017 <a href="#"> MisOfertas.cl</a>
                    <span class="pull-right">Sito web creado por <a target="_blank" href="https://github.com/csalgadolizana/">Cristopher Salgado</a></span>

                </div>
            </div>
            <!--/Copyright-->

        </footer>
        <!--Fin Footer-->

        <!-- SCRIPTS -->
        <!-- JQuery -->
        <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
        <!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">-->
        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="js/popper.min.js"></script>
        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="js/mdb.min.js"></script>

        <script type="text/javascript" src="js/commons.js"></script>
        <script type="text/javascript" src="js/control-login-registrer.js"></script>




        <script>
                                        var param = getParameterByName('d');
                                        var idCiudad;
                                        $(document).ready(function () {
//                $("#check").click();
                                            $("#check").change(function () {
                                                console.log("Entro al cambioo");
                                                $("#contenedor-contras").collapse('toggle');
                                            });
                                            listarRegiones();


                                        });
                                        function getMisDatos() {
                                            $.ajax({
                                                type: "POST",
                                                url: "UsuarioServlet",
                                                data: {"accion": "getDataSession"},
                                                dataType: "json",
                                                success: function (data, textStatus, jqXHR) {
                                                    console.log(" success: getMisDatos()");
                                                    console.log(data);
                                                    if (data.sesion == 1) {
                                                        $("#navbarNombreSesion").text(data.correo);
                                                        $("#txtCorreo").val(data.correo);
                                                        $("#txtCorreo").focus();
                                                        $("#txtNombre").val(data.nombre);
                                                        $("#txtNombre").focus();
                                                        $("#txtApellido").val(data.apellido);
                                                        $("#txtApellido").focus();
                                                        $("#txtRut").val(data.rut);
                                                        $("#txtRut").focus();
                                                        $("#txtFechaNacimiento").val(data.fecha);
//                                                        $('#txtFechaNacimiento').datepicker('setDate', data.fecha);
                                                        console.log(data.fecha);
                                                        $("#txtFechaNacimiento").val(data.fecha);
                                                        $("#selectComuna").val(data.idCiudad);
                                                        $("#selectRegion").val($("#selectComuna option:selected").attr("idreg"));
                                                        $("#selectSexo").val(data.sexo);
                                                        idCiudad = data.idCiudad;
                                                        $("#txtTelefono").val(data.telefono);
                                                        $("#txtTelefono").focus();
                                                        if (data.aceptaInformativo == 1) {
                                                            $("#checAceptaInformativo").click();
                                                        }
                                                        $("#txtNombre").focus();
                                                        $("#txtCorreo").prop("readonly", true);
                                                    } else {
                                                        location.href = "index.html";
                                                    }
                                                },
                                                error: function (jqXHR, textStatus, errorThrown) {
                                                    console.log(" eer getMisDatos()");
                                                    console.log(jqXHR);
                                                    console.log(textStatus);
                                                    console.log(errorThrown);
                                                }
                                            });
                                        }
                                        function listarRegiones() {
                                            $.ajax({
                                                type: "POST",
                                                url: "RegionServlet",
                                                dataType: "json",
                                                success: function (data, textStatus, jqXHR) {
                                                    $("#selectRegion").html("");
                                                    var options = '<option value="" >Regiones</option>';
                                                    $(data).each(function (a, objeto, c) {
                                                        options = options + '<option value="' + objeto.idreg + '">' + objeto.nombre + '</option>';
                                                    });
                                                    $("#selectRegion").html(options);
                                                    $("#selectComuna").prop("required", true);
                                                    listarComunas();
                                                },
                                                error: function (jqXHR, textStatus, errorThrown) {
                                                    console.log("error");
                                                }
                                            });
                                        }
                                        function listarComunas() {
                                            $.ajax({
                                                type: "POST",
                                                url: "ComunaServlet",
                                                dataType: "json",
                                                success: function (data, textStatus, jqXHR) {
                                                    $("#selectComuna").html("");
                                                    var options = '<option value="" >Comunas</option>';
                                                    $(data).each(function (a, objeto, c) {
                                                        options = options + '<option idreg="' + objeto.idreg + '" value="' + objeto.idcom + '">' + objeto.nombre + '</option>';
                                                    });
                                                    $("#selectComuna").html(options);
                                                    $("#selectComuna").prop("required", true);
                                                    getMisDatos();
                                                },
                                                error: function (jqXHR, textStatus, errorThrown) {
                                                    console.log("error");
                                                    return false;
                                                }
                                            });
                                        }
        </script>

    </body>
</html>