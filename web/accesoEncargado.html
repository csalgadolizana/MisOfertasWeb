<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Mis Ofertas</title>
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- Bootstrap core CSS -->
        <!--<link href="css/bootstrap.min.css" rel="stylesheet">-->
        <!-- Material Design Bootstrap -->
        <link href="css/mdb.min.css" rel="stylesheet">
        <!-- Your custom styles (optional) -->
        <link href="css/style.css" rel="stylesheet">
        <link href="css/compiled.min.css" rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" type="text/css" href="css/md-datatables-pagination.css">

        <style>
            .my-inputs{
                font-size: 20px!important;
            }
            .mi-select{
                font-size: 18px;
                font-family: inherit;
                padding: 10px 16px;
                border-radius:6px;
                width: auto;
                background-color: #fff;
                border: 1px solid #ccc;
            }
            .formEditDatos{
                left: 16%;
            }
            /*@media (max-width : 777px) {*/
            @media (max-width : 767px) {
                .formEditDatos{
                    left: 0!important;
                }
                .select-derecho{
                    margin: auto!important;
                    float: none !important;
                    margin-bottom: 1rem!important;
                }
                .select-izquerdo{
                    /*margin-top: 2rem;*/
                    margin: auto!important;
                    float: none !important;
                }
                h2{
                    padding: 1rem!important;
                }
            }
        </style>
    </head>


    <body>

        <!--Header-->
        <header style="padding-bottom: 55px">
            <!--Navbar-->
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-red scrolling-navbar">
                <div class="container">
                    <a class="navbar-brand" href="#"><strong>Mis Ofertas</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="accesoCliente.html">Ofertas</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Contacto</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ml-auto nav-flex-icons">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle waves-effect waves-light" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                                   aria-expanded="false"><i class="fa fa-user"></i> Sesion 
                                </a>
                                <div class="dropdown-menu dropdown-menu-right dropdown-unique" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item waves-effect waves-light" href="index.html"> Cerrar Sesion  <i class="fa fa-window-close-o"></i></a>
                                    <a class="dropdown-item waves-effect waves-light" href="#" > Mis datos  <i class="fa fa-address-card-o"></i></a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!--Fin Navbar-->
        </header>
        <!--Fin Header-->

        <!--Main-->
        <main>
            <hr class="featurette-divider" style="margin-bottom: 50px">

            <section>
                <div class="container marketing">

                    <div class="text-left">
                        <button class="btn btn-default btn-rounded waves-effect waves-light" data-toggle="modal" data-target="#ModalCrearOferta">Crear Oferta <i class="fa fa-eye ml-1"></i></button>
                    </div>

                    <table id="tabla-ofertas" class="table table-striped table-bordered table-responsive text-center" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>Nombre</th>
                                <th>Descricion</th>
                                <th>Precio Normal</th>
                                <th>Precio Oferta</th>
                                <th>Numero de Visitas</th>
                                <th>Min. de compra</th>
                                <th>Max. de compra</th>
                                <th>Publicada</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Id</th>
                                <th>Nombre</th>
                                <th>Descricion</th>
                                <th>Precio Normal</th>
                                <th>Precio Oferta</th>
                                <th>Numero de Visitas</th>
                                <th>Min. de compra</th>
                                <th>Max. de compra</th>
                                <th>Publicada</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <tr>
                                <td>22</td>
                                <td>2X1 en licores</td>
                                <td>Oferta en licores...</td>
                                <td>N/A</td>
                                <td>N/A</td>
                                <td>800</td>
                                <td>1</td>
                                <td>1000</td>
                                <td><i class="fa fa-check fa-2x mb-3 animated rotateIn active" style="color: #01d36b"></i></td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>2X1 en licores</td>
                                <td>Oferta en licores...</td>
                                <td>N/A</td>
                                <td>N/A</td>
                                <td>800</td>
                                <td>1</td>
                                <td>1000</td>
                                <td><i class="fa fa-times fa-2x mb-3 animated rotateIn active" style="color: #ff4b4b"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <hr class="featurette-divider" style="margin-bottom: 120px">
        </main>
        <!--Fin Main-->

        <!--Section of Modal-->
        <section>
            <!-- Modal Medium Danger -->
            <div class="modal fade" id="centralModalError" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-notify modal-warning" role="document">
                    <!--Content-->
                    <div class="modal-content">
                        <!--Header-->
                        <div class="modal-header">
                            <p class="heading lead">Upps!</p>

                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true" class="white-text">&times;</span>
                            </button>
                        </div>

                        <!--Body-->
                        <div class="modal-body">
                            <div class="text-center" id="divTextoAlerta">
                                <i class="fa fa-times fa-4x mb-3 animated rotateIn"></i>
                                <p>Debe ingresar dos veces la misma contrase√±a.</p>
                            </div>
                        </div>

                        <!--Footer-->
                        <div class="modal-footer justify-content-center">
                            <!--<a type="button" class="btn btn-primary-modal">Get it now <i class="fa fa-diamond ml-1"></i></a>-->
                            <a type="button" class="btn btn-outline-secondary-modal waves-effect" data-dismiss="modal">Entendido! <i class="fa fa-hand-paper-o  ml-1"></i></a>
                        </div>
                    </div>
                    <!--/.Content-->
                </div>
            </div>
            <!-- Modal Medium Danger-->

            <!--Modal Administrar ofertas-->
            <div class="modal fade" id="ModalCrearOferta" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="top: 1px!important ; padding: 0!important" aria-hidden="true">
                <div class="modal-dialog modal-lg cascading-modal modal-notify" style="margin-top: 5%!important;"  role="document">
                    <!--Content-->
                    <div class="modal-content">

                        <!--Modal cascading tabs-->
                        <div class="modal-c-tabs">

                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs tabs-2 light-blue darken-3" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#formCrearOferta" role="tab"><i class="fa fa-user mr-1"></i> Crear Oferta</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#formEditarOferta" role="tab"><i class="fa fa-user-plus mr-1"></i> Editar Oferta</a>
                                </li>
                            </ul>

                            <!-- Tab panels -->
                            <div class="tab-content">
                                <!--formCrearOferta-->
                                <div class="tab-pane fade in show active" id="formCrearOferta" role="tabpanel">

                                    <!--Body-->
                                    <div class="modal-body mb-1" >
                                        <div class="md-form form-sm">
                                            <i class="fa fa-newspaper-o prefix"></i>
                                            <input type="text" id="nombreOferta" name="nombreOferta" class="form-control my-inputs" >
                                            <label for="nombreOferta">Nombre de Oferta</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-newspaper-o prefix"></i>
                                            <input type="text" id="descripcionOferta" name="descripcionOferta" class="form-control my-inputs">
                                            <label for="descripcionOferta">Descripcion de la Oferta</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-product-hunt prefix"></i>
                                            <select name="selectProducto" id="selectProducto" class="browser-default form-control select-izquerdo" style="width: 30%;margin-left: 30%" required="">
                                                <option disabled="" selected="">Seleccione</option>
                                                <option value="1">Chocman</option>
                                                <option value="2">Super 8</option></select>
                                            <label for="selectProducto">Producto</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-money prefix"></i>
                                            <input type="number" id="txtPrecioNormal" name="txtPrecioNormal" class="form-control my-inputs" readonly="">
                                            <label for="txtPrecioNormal">Precio Normal</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-money prefix"></i>
                                            <input type="number" id="txtPrecioOferta" name="txtPrecioOferta" class="form-control my-inputs">
                                            <label for="txtPrecioOferta">Precio oferta</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-map prefix"></i>
                                            <select name="selectLocal" id="selectLocal" class="browser-default form-control select-izquerdo" style="width: 30%;margin-left: 30%" required="">
                                                <option disabled="" selected="">Seleccione</option>
                                                <option value="1">Mall tobalaba</option>
                                                <option value="2">Parque Arauco</option></select>
                                            <label for="selectLocal">Ciudad</label>
                                        </div>
                                        <div class="md-form form-sm">
                                            <i class="fa fa-sort-numeric-desc prefix"></i>
                                            <input type="number" id="txtCantMaxima" name="txtCantMaxima" class="form-control  my-inputs">
                                            <label for="txtCantMaxima">Cantidad maxima</label>
                                        </div>
                                    </div>
                                    <!--Footer-->
                                    <div class="modal-footer display-footer">
                                        <button type="button" class="btn btn-outline-info waves-effect ml-auto" data-dismiss="modal">Close</button>
                                    </div>
                                    <!--Fin footer-->

                                </div>
                                <!-- Fin formCrearOferta 7-->

                                <!--Panel 8-->
                                <div class="tab-pane fade" id="formEditarOferta" role="tabpanel">

                                    <!--Body-->
                                    <div class="modal-body">
                                        <div class="md-form form-sm">
                                            <i class="fa fa-envelope prefix"></i>
                                            <input type="text" id="form24" class="form-control">
                                            <label for="form24">Your email</label>
                                        </div>

                                        <div class="md-form form-sm">
                                            <i class="fa fa-lock prefix"></i>
                                            <input type="password" id="form25" class="form-control">
                                            <label for="form25">Your password</label>
                                        </div>

                                        <div class="md-form form-sm">
                                            <i class="fa fa-lock prefix"></i>
                                            <input type="password" id="form26" class="form-control">
                                            <label for="form26">Repeat password</label>
                                        </div>

                                        <div class="text-center form-sm mt-2">
                                            <button class="btn btn-info">Sign up <i class="fa fa-sign-in ml-1"></i></button>
                                        </div>

                                    </div>
                                    <!--Footer-->
                                    <div class="modal-footer">
                                        <div class="options text-right">
                                            <p class="pt-1">Already have an account? <a href="#" class="blue-text">Log In</a></p>
                                        </div>
                                        <button type="button" class="btn btn-outline-info waves-effect ml-auto" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                                <!--/.Panel 8-->
                            </div>

                        </div>
                    </div>
                    <!--/.Content-->
                </div>
            </div>
            <!--Fin Modal Administrar ofertas-->
        </section>
        <!--Fin Section of Modal-->

        <!--Footer-->
        <footer class="page-footer indigo center-on-small-only pt-0">
            <div class="container">

                <!--First row-->
                <div class="row">

                    <!--First column-->
                    <div class="col-md-12 wow fadeIn" data-wow-delay="0.3s">

                        <div class="text-center d-flex justify-content-center my-4">

                            <!--Facebook-->
                            <a class="icons-sm fb-ic"><i class="fa fa-facebook white-text fa-lg pr-md-4"> </i></a>
                            <!--Twitter-->
                            <a class="icons-sm tw-ic"><i class="fa fa-twitter white-text fa-lg pr-md-4"> </i></a>
                            <!--Google +-->
                            <a class="icons-sm gplus-ic"><i class="fa fa-google-plus white-text fa-lg pr-md-4"> </i></a>
                            <!--Linkedin-->
                            <a class="icons-sm li-ic"><i class="fa fa-linkedin white-text fa-lg pr-md-4"> </i></a>
                            <!--Instagram-->
                            <a class="icons-sm ins-ic"><i class="fa fa-instagram white-text fa-lg pr-md-4"> </i></a>
                            <!--Pinterest-->
                            <a class="icons-sm pin-ic"><i class="fa fa-pinterest white-text fa-lg pr-md-4"> </i></a>
                        </div>

                    </div>
                    <!--/First column-->

                </div>
                <!--/First row-->

            </div>
            <!--/Footer Links-->
            <!--Copyright-->
            <div class="footer-copyright wow fadeIn" data-wow-delay="0.3s">
                <div class="container-fluid">
                    Copyright ¬© 2017 <a href="#"> MisOfertas.cl</a>

                </div>
            </div>
            <!--/Copyright-->

        </footer>
        <!--Fin Footer-->

        <!-- SCRIPTS -->
        <!-- JQuery -->
        <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
        <!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">-->
        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="js/popper.min.js"></script>
        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="js/mdb.min.js"></script>



        <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

        <script>
            $(document).ready(function () {

                $('#tabla-ofertas').DataTable({
                    "language": {
                        "lengthMenu": "",
                        "search": "Buscar : ",
                        "zeroRecords": "Ningun dato encontrado - Lo sentimos",
                        "info": "Mostrando pagina _PAGE_ de _PAGES_",
                        "infoEmpty": "No hay datos disponibles",
                        "infoFiltered": "(filtered from _MAX_ total records)"
                    }
                });
                $('select').addClass('mdb-select');
//                $('.mdb-select').material_select();

                pedirDatosDeRegistro();
                listarCiudades();
                comprobarSiCorreoExiste();
                $('#centralModalError').on('hidden.bs.modal', function (e) {
                    $("#txtCorreo").focus();
                });
                //max-width : 776px
//                var width = $(window).width();
                var max_width = 776;
                if ($(window).width() < max_width) {
//                    width = $(this).width();
                    $("#btnCancelar").addClass("btn-sm");
                    $("#btnRegistrarse").addClass("btn-sm");
                } else {
                    $("#btnCancelar").removeClass("btn-sm");
                    $("#btnRegistrarse").removeClass("btn-sm");
                }
                $(window).on('resize', function () {
//                    console.log("Largo ->" + $(this).width() + " Comparado con -> " + max_width);
                    if ($(this).width() < max_width) {
                        width = $(this).width();
                        $("#btnCancelar").addClass("btn-sm");
                        $("#btnRegistrarse").addClass("btn-sm");
                    } else {
                        $("#btnCancelar").removeClass("btn-sm");
                        $("#btnRegistrarse").removeClass("btn-sm");
                    }
                });

                $("#check").change(function () {
                    $("#contenedor_contras").collapse('toggle');
//                     collapse
                    if ($(this).prop('checked')) {
//                        $("#contenedor_contras").show();
                    } else {
//                        $("#contenedor_contras").hide();
                    }
//                    console.log("Cambio!! "+$(this).prop('checked'));
                });
            });
            function comprobarSiCorreoExiste() {
                $("#btnRegistroFalso").click(function (evt) {
                    $.ajax({
                        type: "POST",
                        url: "ClienteServlet",
                        data: {"btnAccion": "comprobarCorreo", "mail": $("#txtCorreo").val().trim()},
                        dataType: "json",
                        success: function (data, textStatus, jqXHR) {
                            if (data.correo != "") {
                                $("#centralModalError").modal('show');
                                $("#divTextoAlerta").find("p").html("<strong>El Correo ya existe!!.</strong> <br>" +
                                        "ingrese con uno nuevo o inicie sesion");
                                $("#txtCorreo").parent().find("label").addClass("active");
                            } else {
                                $("#btnRegistrarse").click();
                            }
                            console.log("Secces");
                            console.log(data);
                            console.log(textStatus);
                            console.log(jqXHR);
//                            if (data != null) {
//                                $("#txtCorreo").val(data.correo);
//                                $("#txtPasswd").val(data.password1);
//                                $("#txtPasswd2").val(data.password2);
//                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            console.log("error");
                            console.log(jqXHR);
                            console.log(textStatus);
                            console.log(errorThrown);
                        }
                    });
                    $("#txtNombre").focus();
                    // tu codigo aqui
                });
            }
            function pedirDatosDeRegistro() {
                $.ajax({
                    type: "POST",
                    url: "ClienteServlet",
                    data: {"btnAccion": "quieroDatos"},
                    dataType: "json",
                    success: function (data, textStatus, jqXHR) {
                        console.log("Secces");
                        console.log(data);
                        console.log(textStatus);
                        console.log(jqXHR);
                        if (data != null) {
                            $("#txtCorreo").val(data.correo);
                            $("#txtPasswd").val(data.password1);
                            $("#txtPasswd2").val(data.password2);
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log("error");
                        console.log(jqXHR);
                        console.log(textStatus);
                        console.log(errorThrown);
                    }
                });
                $("#txtNombre").focus();
            }
            function listarCiudades() {
                $.ajax({
                    type: "POST",
                    url: "CiudadesServlet",
                    data: {"accion": "listaCiudades"},
                    dataType: "json",
                    success: function (data, textStatus, jqXHR) {
                        $("#selectCiudades").html("");
                        var options;
                        $(data).each(function (a, objeto, c) {
                            options = options + '<option value="' + objeto.idc + '">' + objeto.nombre + '</option>';
                        });
                        $("#selectCiudades").html(options);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log("error");
                    }
                });
            }
        </script>

    </body>
</html>